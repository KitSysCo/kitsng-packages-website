<!DOCTYPE html>
<html lang="en">
<head>
    <base href="/kitsng-packages-website/">

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Form Example - Kitsng Docs</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <style>
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        pre[class*="language-"] {
            margin: 1rem 0;
            border-radius: 0.5rem;
        }
        code[class*="language-"] {
            font-size: 0.875rem;
        }
    </style>
</head>
<body class="bg-gray-50">
    <div class="flex min-h-screen">
        <aside id="sidebar" class="w-64 bg-white border-r border-gray-200 fixed h-screen overflow-y-auto">
            <div class="p-6">
                <h1 class="text-2xl font-bold text-gray-900 mb-2"><a href="/index.html" class="hover:text-blue-600">Kitsng Docs</a></h1>
                <p class="text-sm text-gray-600 mb-6">v20 Documentation</p>
                
                <nav class="space-y-2">
                    <div class="mb-4">
                        <h2 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2">Form Factory</h2>
                        <ul class="space-y-1">
                            <li><a href="/docs/form-factory/index.html" class="block px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md">Overview</a></li>
                            <li><a href="/docs/form-factory/installation.html" class="block px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md">Installation</a></li>
                            <li><a href="/docs/form-factory/quick-start.html" class="block px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md">Quick Start</a></li>
                            <li class="ml-4">
                                <details class="group">
                                    <summary class="cursor-pointer px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md">Fields</summary>
                                    <ul class="ml-4 mt-1 space-y-1">
                                        <li><a href="/docs/form-factory/fields/input.html" class="block px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md">Input</a></li>
                                        <li><a href="/docs/form-factory/fields/textarea.html" class="block px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md">Textarea</a></li>
                                        <li><a href="/docs/form-factory/fields/dropdown.html" class="block px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md">Dropdown</a></li>
                                        <li><a href="/docs/form-factory/fields/checkbox.html" class="block px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md">Checkbox</a></li>
                                        <li><a href="/docs/form-factory/fields/input-number.html" class="block px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md">Input Number</a></li>
                                        <li><a href="/docs/form-factory/fields/input-phone.html" class="block px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md">Input Phone</a></li>
                                        <li><a href="/docs/form-factory/fields/radio-button.html" class="block px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md">Radio Button</a></li>
                                        <li><a href="/docs/form-factory/fields/multi-select.html" class="block px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md">Multi Select</a></li>
                                        <li><a href="/docs/form-factory/fields/calendar-picker.html" class="block px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md">Calendar Picker</a></li>
                                        <li><a href="/docs/form-factory/fields/lookup-select.html" class="block px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md">Lookup Select</a></li>
                                        <li><a href="/docs/form-factory/fields/lookup-multi-select.html" class="block px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md">Lookup Multi Select</a></li>
                                        <li><a href="/docs/form-factory/fields/file-upload.html" class="block px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md">File Upload</a></li>
                                        <li><a href="/docs/form-factory/fields/color-picker.html" class="block px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md">Color Picker</a></li>
                                        <li><a href="/docs/form-factory/fields/editor.html" class="block px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md">Editor</a></li>
                                        <li><a href="/docs/form-factory/fields/google-map.html" class="block px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md">Google Map</a></li>
                                        <li><a href="/docs/form-factory/fields/slider.html" class="block px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md">Slider</a></li>
                                        <li><a href="/docs/form-factory/fields/icon-picker.html" class="block px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md">Icon Picker</a></li>
                                        <li><a href="/docs/form-factory/fields/tree-select.html" class="block px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md">Tree Select</a></li>
                                        <li><a href="/docs/form-factory/fields/auto-complete.html" class="block px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md">Auto Complete</a></li>
                                        <li><a href="/docs/form-factory/fields/button.html" class="block px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md">Button</a></li>
                                        <li><a href="/docs/form-factory/fields/password.html" class="block px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md">Password</a></li>
                                    </ul>
                                </details>
                            </li>
                            <li class="ml-4">
                                <details class="group">
                                    <summary class="cursor-pointer px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md">Examples</summary>
                                    <ul class="ml-4 mt-1 space-y-1">
                                        <li><a href="/docs/form-factory/examples/basic-form.html" class="block px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md">Basic Form</a></li>
                                        <li><a href="/docs/form-factory/examples/complex-form.html" class="block px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md">Complex Form</a></li>
                                        <li><a href="/docs/form-factory/examples/dynamic-form.html" class="block px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md">Dynamic Form</a></li>
                                        <li><a href="/docs/form-factory/examples/complete-example.html" class="block px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md">Complete Example</a></li>
                                    </ul>
                                </details>
                            </li>
                        </ul>
                    </div>
                    
                    <div class="mb-4">
                        <h2 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2">Table Factory</h2>
                        <ul class="space-y-1">
                            <li><a href="/docs/table-factory/index.html" class="block px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md">Overview</a></li>
                            <li><a href="/docs/table-factory/installation.html" class="block px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md">Installation</a></li>
                            <li><a href="/docs/table-factory/quick-start.html" class="block px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md">Quick Start</a></li>
                            <li><a href="/docs/table-factory/overview.html" class="block px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md">Architecture Overview</a></li>
                            <li class="ml-4">
                                <details class="group">
                                    <summary class="cursor-pointer px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md">Components</summary>
                                    <ul class="ml-4 mt-1 space-y-1">
                                        <li><a href="/docs/table-factory/components/table-factory.html" class="block px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md">Table Factory</a></li>
                                        <li><a href="/docs/table-factory/components/fetch-table-factory.html" class="block px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md">Fetch Table Factory</a></li>
                                        <li><a href="/docs/table-factory/components/tree-table-factory.html" class="block px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md">Tree Table Factory</a></li>
                                    </ul>
                                </details>
                            </li>
                            <li class="ml-4">
                                <details class="group">
                                    <summary class="cursor-pointer px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md">Features</summary>
                                    <ul class="ml-4 mt-1 space-y-1">
                                        <li><a href="/docs/table-factory/features/column-templates.html" class="block px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md">Column Templates</a></li>
                                        <li><a href="/docs/table-factory/features/api-integration.html" class="block px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md">API Integration</a></li>
                                        <li><a href="/docs/table-factory/features/row-actions.html" class="block px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md">Row Actions</a></li>
                                    </ul>
                                </details>
                            </li>
                            <li class="ml-4">
                                <details class="group">
                                    <summary class="cursor-pointer px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md">Examples</summary>
                                    <ul class="ml-4 mt-1 space-y-1">
                                        <li><a href="/docs/table-factory/examples/basic-table.html" class="block px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md">Basic Table</a></li>
                                        <li><a href="/docs/table-factory/examples/table-with-api.html" class="block px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md">Table with API</a></li>
                                        <li><a href="/docs/table-factory/examples/complete-example.html" class="block px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-md">Complete Example</a></li>
                                    </ul>
                                </details>
                            </li>
                            <li><a href="/docs/table-factory/api/interfaces.html" class="block px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-md">API Reference</a></li>
                        </ul>
                    </div>
                </nav>
            </div>
        </aside>
        
        <main class="flex-1 ml-64">
            <div class="max-w-4xl mx-auto px-8 py-12">
                <div class="bg-white rounded-lg shadow-sm p-8">
                    <div class="prose prose-lg max-w-none">
                        <h1 class="text-4xl font-bold text-gray-900 mb-6 mt-8">Dynamic Form Example</h1>

<p class="text-gray-700 mb-4 leading-relaxed">This example demonstrates creating forms dynamically at runtime, with conditional logic, field dependencies, and API-driven form configuration.</p>

<h2 class="text-3xl font-semibold text-gray-900 mb-4 mt-8">Complete Example</h2>

<pre class="bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto my-4"><code class="language-typescript">import { Component, OnInit, OnDestroy } from '@angular/core';
import { FormGroup } from '@angular/forms';
import { HttpClient } from '@angular/common/http';
import { Subject, takeUntil } from 'rxjs';
import { KitsngFormFactoryModel } from 'kitsng-form-factory';
import { ILookupDataProvider, LookupDataLoadConfig, LookupResponse } from 'kitsng-form-factory';
import { Observable } from 'rxjs';
import { map } from 'rxjs/operators';

<p class="text-gray-700 mb-4 leading-relaxed">// Custom Data Provider for Products
class ProductDataProvider implements ILookupDataProvider {
  constructor(private http: HttpClient) {}</p>

<p class="text-gray-700 mb-4 leading-relaxed">loadData(config: LookupDataLoadConfig): Observable<LookupResponse> {
    return this.http.post('/api/products/search', {
      page: config.pageIndex,
      size: config.pageSize,
<div class="overflow-x-auto my-6">
<table class="min-w-full divide-y divide-gray-200 border border-gray-300">
<thead class="bg-gray-50">
<tr>
<th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b"></th>
</tr>
</thead>
<tbody class="bg-white divide-y divide-gray-200">
<tr class="hover:bg-gray-50">
<td class="px-4 py-3 text-sm text-gray-700 border-b"></td>
</tr>
</tbody>
</table>
</div>
    }).pipe(
      map((response: any) => ({
        items: response.data.items,
        totalItems: response.data.total
      }))
    );
  }</p>

<div class="overflow-x-auto my-6">
<table class="min-w-full divide-y divide-gray-200 border border-gray-300">
<thead class="bg-gray-50">
<tr>
</tr>
</thead>
<tbody class="bg-white divide-y divide-gray-200">
</tbody>
</table>
</div>
    return this.http.get(<code class="bg-gray-100 text-gray-800 px-1.5 py-0.5 rounded text-sm font-mono">/api/products/${id}</code>);
  }
}</p>

<p class="text-gray-700 mb-4 leading-relaxed">// Custom Data Provider for Users
class UserDataProvider implements ILookupDataProvider {
  constructor(private http: HttpClient) {}</p>

<p class="text-gray-700 mb-4 leading-relaxed">loadData(config: LookupDataLoadConfig): Observable<LookupResponse> {
    return this.http.get('/api/users', {
      params: {
        page: config.pageIndex.toString(),
        size: config.pageSize.toString(),
<div class="overflow-x-auto my-6">
<table class="min-w-full divide-y divide-gray-200 border border-gray-300">
<thead class="bg-gray-50">
<tr>
<th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b"></th>
</tr>
</thead>
<tbody class="bg-white divide-y divide-gray-200">
</tbody>
</table>
</div>
      }
    }).pipe(
      map((response: any) => ({
        items: response.users,
        totalItems: response.total
      }))
    );
  }</p>

<div class="overflow-x-auto my-6">
<table class="min-w-full divide-y divide-gray-200 border border-gray-300">
<thead class="bg-gray-50">
<tr>
</tr>
</thead>
<tbody class="bg-white divide-y divide-gray-200">
</tbody>
</table>
</div>
    return this.http.get(<code class="bg-gray-100 text-gray-800 px-1.5 py-0.5 rounded text-sm font-mono">/api/users/${id}</code>);
  }
}</p>

<p class="text-gray-700 mb-4 leading-relaxed">@Component({
  selector: 'app-dynamic-order-form',
  template: <code class="bg-gray-100 text-gray-800 px-1.5 py-0.5 rounded text-sm font-mono">
    <div class="container">
      <h2>Create Order</h2>
      
      <div *ngIf="loading" class="loading">
        Loading form configuration...
      </div>
      
      <kitsng-form-factory
        *ngIf="!loading && formFields.length > 0"
        [fields]="formFields"
        [form]="orderForm"
        (submit)="onSubmit()"
        (fieldChange)="onFieldChange($event)">
      </kitsng-form-factory>
      
      <div *ngIf="submitted && orderForm.valid" class="alert alert-success">
        Order created successfully!
      </div>
      
      <div *ngIf="submitted && !orderForm.valid" class="alert alert-danger">
        Please correct the errors in the form.
      </div>
    </div>
  </code>,
  styles: [<code class="bg-gray-100 text-gray-800 px-1.5 py-0.5 rounded text-sm font-mono">
    .container {
      max-width: 1000px;
      margin: 0 auto;
      padding: 20px;
    }
    .loading {
      text-align: center;
      padding: 40px;
    }
  </code>]
})
export class DynamicOrderFormComponent implements OnInit, OnDestroy {
  orderForm = new FormGroup({});
  formFields: KitsngFormFactoryModel[] = [];
  loading = true;
  submitted = false;
  private destroy$ = new Subject<void>();</p>

<p class="text-gray-700 mb-4 leading-relaxed">constructor(
    private http: HttpClient,
    private formFactoryService: KitsngFormFactoryService
  ) {}</p>

<p class="text-gray-700 mb-4 leading-relaxed">ngOnInit(): void {
    this.loadFormConfiguration();
  }</p>

<p class="text-gray-700 mb-4 leading-relaxed">ngOnDestroy(): void {
    this.destroy$.next();
    this.destroy$.complete();
  }</p>

<p class="text-gray-700 mb-4 leading-relaxed">/**
   * Load form configuration from API or create dynamically
   */
  loadFormConfiguration(): void {
    // Option 1: Load from API
    // this.http.get('/api/forms/order').subscribe(config => {
    //   this.buildFormFields(config);
    // });</p>

<p class="text-gray-700 mb-4 leading-relaxed">// Option 2: Build dynamically
    this.buildFormFields();
    this.loading = false;
  }</p>

<p class="text-gray-700 mb-4 leading-relaxed">/**
   * Build form fields dynamically based on business logic
   */
  buildFormFields(config?: any): void {
    this.formFields = [
      // Customer Section
      {
        controlType: 'title',
        colSize: 'col-span-12',
        options: {
          label: 'Customer Information',
          tag: 'h3',
          class: 'section-title'
        }
      },
      
      {
        controlType: 'lookup-select',
        colSize: 'col-span-12',
        options: {
          formControlName: 'customerId',
          label: 'Customer',
          placeholder: 'Search and select customer...',
          dataProvider: new UserDataProvider(this.http),
          optionLabel: 'fullName',
          optionValue: 'id',
          pageSize: 20,
          filter: true,
          validators: {
            required: true
          },
          ngModelChange: (value, formGroup, selectedOption, field) => {
            // Load customer details and update form
            if (selectedOption) {
              this.loadCustomerDetails(selectedOption.id, formGroup);
            }
          }
        }
      },</p>

<p class="text-gray-700 mb-4 leading-relaxed">// Customer details (auto-filled from customer selection)
      {
        controlType: 'input',
        colSize: 'col-span-6',
        options: {
          formControlName: 'customerEmail',
          label: 'Email',
          readonly: true,
          validators: {
            required: true,
            email: true
          }
        }
      },
      {
        controlType: 'input-phone',
        colSize: 'col-span-6',
        options: {
          formControlName: 'customerPhone',
          label: 'Phone',
          readonly: true,
          apiBaseUrl: '/api',
          validators: {
            required: true
          }
        }
      },</p>

<p class="text-gray-700 mb-4 leading-relaxed">// Shipping Address Section
      {
        controlType: 'divider',
        colSize: 'col-span-12',
        options: {}
      },
      {
        controlType: 'title',
        colSize: 'col-span-12',
        options: {
          label: 'Shipping Address',
          tag: 'h3'
        }
      },</p>

<p class="text-gray-700 mb-4 leading-relaxed">{
        controlType: 'input',
        colSize: 'col-span-12',
        options: {
          formControlName: 'streetAddress',
          label: 'Street Address',
          placeholder: 'Enter street address',
          validators: {
            required: true
          }
        }
      },
      {
        controlType: 'input',
        colSize: 'col-span-6',
        options: {
          formControlName: 'city',
          label: 'City',
          placeholder: 'Enter city',
          validators: {
            required: true
          }
        }
      },
      {
        controlType: 'input',
        colSize: 'col-span-6',
        options: {
          formControlName: 'state',
          label: 'State/Province',
          placeholder: 'Enter state',
          validators: {
            required: true
          }
        }
      },
      {
        controlType: 'input',
        colSize: 'col-span-6',
        options: {
          formControlName: 'zipCode',
          label: 'ZIP/Postal Code',
          placeholder: 'Enter ZIP code',
          validators: {
            required: true,
            pattern: '^[0-9]{5}(-[0-9]{4})?$'
          }
        }
      },
      {
        controlType: 'dropdown',
        colSize: 'col-span-6',
        options: {
          formControlName: 'country',
          label: 'Country',
          placeholder: 'Select country',
          dropdownOptions: this.getCountries(),
          optionLabel: 'name',
          optionValue: 'code',
          filter: true,
          validators: {
            required: true
          },
          ngModelChange: (value, formGroup, selectedOption, field) => {
            // Update shipping options based on country
            this.updateShippingOptions(value, formGroup);
          }
        }
      },</p>

<p class="text-gray-700 mb-4 leading-relaxed">// Shipping Options (dynamic based on country)
      {
        controlType: 'radio-button',
        colSize: 'col-span-12',
        options: {
          formControlName: 'shippingMethod',
          label: 'Shipping Method',
          radioOptions: [],
          buttonLayout: 'horizontal',
          dependsOn: ['country'],
          dynamicOptions: (form: FormGroup) => {
            const country = form.get('country')?.value;
            return this.getShippingOptions(country);
          },
          validators: {
            required: true
          },
          visibleWhen: {
            field: 'country',
            operator: 'isNotEmpty'
          }
        }
      },</p>

<p class="text-gray-700 mb-4 leading-relaxed">// Order Items Section
      {
        controlType: 'divider',
        colSize: 'col-span-12',
        options: {}
      },
      {
        controlType: 'title',
        colSize: 'col-span-12',
        options: {
          label: 'Order Items',
          tag: 'h3'
        }
      },</p>

<p class="text-gray-700 mb-4 leading-relaxed">{
        controlType: 'lookup-multi-select',
        colSize: 'col-span-12',
        options: {
          formControlName: 'products',
          label: 'Products',
          placeholder: 'Search and select products...',
          dataProvider: new ProductDataProvider(this.http),
          optionLabel: 'name',
          optionValue: 'id',
          display: 'chip',
          pageSize: 20,
          filter: true,
          showToggleAll: true,
          validators: {
            required: true,
            custom: (control) => {
              const value = control.value;
<div class="overflow-x-auto my-6">
<table class="min-w-full divide-y divide-gray-200 border border-gray-300">
<thead class="bg-gray-50">
<tr>
<th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b"></th>
<th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b">!Array.isArray(value)</th>
<th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b"></th>
</tr>
</thead>
<tbody class="bg-white divide-y divide-gray-200">
</tbody>
</table>
</div>
                return { required: 'Please select at least one product' };
              }
              if (value.length > 50) {
                return { maxProducts: 'Maximum 50 products allowed' };
              }
              return null;
            }
          },
          ngModelChange: (value, formGroup, selectedOptions, field) => {
            // Calculate total when products change
            this.calculateOrderTotal(value, formGroup);
          }
        }
      },</p>

<p class="text-gray-700 mb-4 leading-relaxed">// Order Details
      {
        controlType: 'input-number',
        colSize: 'col-span-4',
        options: {
          formControlName: 'subtotal',
          label: 'Subtotal',
          prefix: '$',
          mode: 'currency',
          readonly: true,
          minFractionDigits: 2,
          maxFractionDigits: 2
        }
      },
      {
        controlType: 'input-number',
        colSize: 'col-span-4',
        options: {
          formControlName: 'tax',
          label: 'Tax',
          prefix: '$',
          mode: 'currency',
          readonly: true,
          minFractionDigits: 2,
          maxFractionDigits: 2
        }
      },
      {
        controlType: 'input-number',
        colSize: 'col-span-4',
        options: {
          formControlName: 'total',
          label: 'Total',
          prefix: '$',
          mode: 'currency',
          readonly: true,
          minFractionDigits: 2,
          maxFractionDigits: 2,
          class: 'total-amount'
        }
      },</p>

<p class="text-gray-700 mb-4 leading-relaxed">// Payment Information
      {
        controlType: 'divider',
        colSize: 'col-span-12',
        options: {}
      },
      {
        controlType: 'title',
        colSize: 'col-span-12',
        options: {
          label: 'Payment Information',
          tag: 'h3'
        }
      },</p>

<p class="text-gray-700 mb-4 leading-relaxed">{
        controlType: 'select-button',
        colSize: 'col-span-12',
        options: {
          formControlName: 'paymentMethod',
          label: 'Payment Method',
          selectButtonOptions: [
            { id: 'credit', text: 'Credit Card' },
            { id: 'debit', text: 'Debit Card' },
            { id: 'paypal', text: 'PayPal' },
            { id: 'bank', text: 'Bank Transfer' }
          ],
          optionLabel: 'text',
          optionValue: 'id',
          multiple: false,
          validators: {
            required: true
          },
          ngModelChange: (value, formGroup, selectedOption, field) => {
            // Show/hide payment fields based on method
            this.updatePaymentFields(value, formGroup);
          }
        }
      },</p>

<p class="text-gray-700 mb-4 leading-relaxed">// Credit Card fields (conditional)
      {
        controlType: 'input',
        colSize: 'col-span-12',
        options: {
          formControlName: 'cardNumber',
          label: 'Card Number',
          placeholder: 'Enter card number',
          type: 'text',
          validators: {
            required: true,
            pattern: '^[0-9]{13,19}$'
          },
          visibleWhen: {
            field: 'paymentMethod',
            operator: 'in',
            value: ['credit', 'debit']
          }
        }
      },
      {
        controlType: 'input',
        colSize: 'col-span-6',
        options: {
          formControlName: 'cardExpiry',
          label: 'Expiry Date',
          placeholder: 'MM/YY',
          type: 'text',
          validators: {
            required: true,
<div class="overflow-x-auto my-6">
<table class="min-w-full divide-y divide-gray-200 border border-gray-300">
<thead class="bg-gray-50">
<tr>
</tr>
</thead>
<tbody class="bg-white divide-y divide-gray-200">
</tbody>
</table>
</div>
          },
          visibleWhen: {
            field: 'paymentMethod',
            operator: 'in',
            value: ['credit', 'debit']
          }
        }
      },
      {
        controlType: 'input',
        colSize: 'col-span-6',
        options: {
          formControlName: 'cardCVC',
          label: 'CVC',
          placeholder: 'CVC',
          type: 'text',
          validators: {
            required: true,
            pattern: '^[0-9]{3,4}$'
          },
          visibleWhen: {
            field: 'paymentMethod',
            operator: 'in',
            value: ['credit', 'debit']
          }
        }
      },</p>

<p class="text-gray-700 mb-4 leading-relaxed">// Order Notes
      {
        controlType: 'textarea',
        colSize: 'col-span-12',
        options: {
          formControlName: 'notes',
          label: 'Order Notes',
          placeholder: 'Additional notes (optional)',
          rows: 4,
          validators: {
            maxLength: 500
          }
        }
      },</p>

<p class="text-gray-700 mb-4 leading-relaxed">// Delivery Date
      {
        controlType: 'calendar-picker',
        colSize: 'col-span-6',
        options: {
          formControlName: 'deliveryDate',
          label: 'Preferred Delivery Date',
          placeholder: 'Select date',
          calendarType: 'date',
          dateFormat: 'mm/dd/yy',
          showIcon: true,
          minDate: new Date(),
          validators: {
            required: true
          }
        }
      },</p>

<p class="text-gray-700 mb-4 leading-relaxed">// Special Instructions Toggle
      {
        controlType: 'switch-button',
        colSize: 'col-span-6',
        options: {
          formControlName: 'hasSpecialInstructions',
          label: 'Add Special Instructions',
          trueValue: true,
          falseValue: false
        }
      },</p>

<p class="text-gray-700 mb-4 leading-relaxed">// Special Instructions (conditional)
      {
        controlType: 'textarea',
        colSize: 'col-span-12',
        options: {
          formControlName: 'specialInstructions',
          label: 'Special Instructions',
          placeholder: 'Enter special instructions...',
          rows: 3,
          visibleWhen: {
            field: 'hasSpecialInstructions',
            value: true,
            operator: 'equals'
          }
        }
      }
    ];
  }</p>

<p class="text-gray-700 mb-4 leading-relaxed">getCountries(): any[] {
    return [
      { code: 'us', name: 'United States' },
      { code: 'ca', name: 'Canada' },
      { code: 'uk', name: 'United Kingdom' },
      { code: 'au', name: 'Australia' },
      { code: 'de', name: 'Germany' },
      { code: 'fr', name: 'France' }
    ];
  }</p>

<p class="text-gray-700 mb-4 leading-relaxed">getShippingOptions(country: string): any[] {
    const options: any = {
      'us': [
        { id: 'standard', text: 'Standard (5-7 days)' },
        { id: 'express', text: 'Express (2-3 days)' },
        { id: 'overnight', text: 'Overnight' }
      ],
      'ca': [
        { id: 'standard', text: 'Standard (7-10 days)' },
        { id: 'express', text: 'Express (3-5 days)' }
      ],
      'uk': [
        { id: 'standard', text: 'Standard (7-14 days)' },
        { id: 'express', text: 'Express (3-5 days)' }
      ],
      'default': [
        { id: 'standard', text: 'Standard Shipping' },
        { id: 'express', text: 'Express Shipping' }
      ]
    };
    
<div class="overflow-x-auto my-6">
<table class="min-w-full divide-y divide-gray-200 border border-gray-300">
<thead class="bg-gray-50">
<tr>
<th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b"></th>
</tr>
</thead>
<tbody class="bg-white divide-y divide-gray-200">
</tbody>
</table>
</div>
  }</p>

<p class="text-gray-700 mb-4 leading-relaxed">loadCustomerDetails(customerId: number, formGroup: FormGroup): void {
    this.http.get(<code class="bg-gray-100 text-gray-800 px-1.5 py-0.5 rounded text-sm font-mono">/api/customers/${customerId}</code>)
      .pipe(takeUntil(this.destroy$))
      .subscribe(customer => {
        formGroup.patchValue({
          customerEmail: customer.email,
          customerPhone: customer.phone,
          streetAddress: customer.address?.street,
          city: customer.address?.city,
          state: customer.address?.state,
          zipCode: customer.address?.zipCode,
          country: customer.address?.country
        });
      });
  }</p>

<p class="text-gray-700 mb-4 leading-relaxed">updateShippingOptions(country: string, formGroup: FormGroup): void {
    // Shipping options are updated via dynamicOptions
    // Clear current selection
    formGroup.get('shippingMethod')?.setValue(null);
  }</p>

<p class="text-gray-700 mb-4 leading-relaxed">calculateOrderTotal(productIds: number[], formGroup: FormGroup): void {
<div class="overflow-x-auto my-6">
<table class="min-w-full divide-y divide-gray-200 border border-gray-300">
<thead class="bg-gray-50">
<tr>
<th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b"></th>
</tr>
</thead>
<tbody class="bg-white divide-y divide-gray-200">
</tbody>
</table>
</div>
      formGroup.patchValue({
        subtotal: 0,
        tax: 0,
        total: 0
      });
      return;
    }</p>

<p class="text-gray-700 mb-4 leading-relaxed">this.http.post('/api/products/calculate-total', { productIds })
      .pipe(takeUntil(this.destroy$))
      .subscribe((result: any) => {
        formGroup.patchValue({
          subtotal: result.subtotal,
          tax: result.tax,
          total: result.total
        });
      });
  }</p>

<p class="text-gray-700 mb-4 leading-relaxed">updatePaymentFields(paymentMethod: string, formGroup: FormGroup): void {
    // Clear payment fields when method changes
    if (!['credit', 'debit'].includes(paymentMethod)) {
      formGroup.patchValue({
        cardNumber: null,
        cardExpiry: null,
        cardCVC: null
      });
    }
  }</p>

<p class="text-gray-700 mb-4 leading-relaxed">onSubmit(): void {
    this.submitted = true;
    
    if (this.orderForm.valid) {
      const orderData = {
        ...this.orderForm.value,
        createdAt: new Date().toISOString()
      };
      
      console.log('Order data:', orderData);
      
      // Save order
      // this.http.post('/api/orders', orderData).subscribe(...);
    } else {
      this.orderForm.markAllAsTouched();
    }
  }</p>

<p class="text-gray-700 mb-4 leading-relaxed">onFieldChange(event: { fieldName: string; value: any; form: FormGroup }): void {
    console.log(<code class="bg-gray-100 text-gray-800 px-1.5 py-0.5 rounded text-sm font-mono">Field ${event.fieldName} changed:</code>, event.value);
  }
}
</code></pre></p>

<h2 class="text-3xl font-semibold text-gray-900 mb-4 mt-8">Features Demonstrated</h2>

<ul class="list-disc list-inside space-y-2 my-4 ml-4">
<li class="text-gray-700">✅ <strong class="font-semibold">Dynamic Form Generation</strong> - Form fields built at runtime</li>
<li class="text-gray-700">✅ <strong class="font-semibold">API-Driven Lookups</strong> - Customer and product selection with pagination</li>
<li class="text-gray-700">✅ <strong class="font-semibold">Field Dependencies</strong> - Shipping options depend on country</li>
<li class="text-gray-700">✅ <strong class="font-semibold">Auto-Fill from API</strong> - Customer details auto-filled from selection</li>
<li class="text-gray-700">✅ <strong class="font-semibold">Dynamic Calculations</strong> - Order totals calculated from products</li>
<li class="text-gray-700">✅ <strong class="font-semibold">Conditional Fields</strong> - Payment fields show/hide based on method</li>
<li class="text-gray-700">✅ <strong class="font-semibold">Complex Validation</strong> - Multiple validation rules</li>
<li class="text-gray-700">✅ <strong class="font-semibold">Custom Data Providers</strong> - Generic data provider implementation</li>
</ul>

<h2 class="text-3xl font-semibold text-gray-900 mb-4 mt-8">Key Patterns</h2>

<ol class="list-decimal list-inside space-y-2 my-4 ml-4">
<li class="text-gray-700"><strong class="font-semibold">Dynamic Field Creation</strong> - Fields built based on business logic</li>
<li class="text-gray-700"><strong class="font-semibold">API Integration</strong> - Multiple API calls for data loading</li>
<li class="text-gray-700"><strong class="font-semibold">Real-time Calculations</strong> - Totals update as products change</li>
<li class="text-gray-700"><strong class="font-semibold">Conditional UI</strong> - Fields appear/disappear based on selections</li>
<li class="text-gray-700"><strong class="font-semibold">Data Provider Pattern</strong> - Generic interface for any data source</li>
</ol>

<h2 class="text-3xl font-semibold text-gray-900 mb-4 mt-8">Next Steps</h2>

<ul class="list-disc list-inside space-y-2 my-4 ml-4">
<li class="text-gray-700">See <a href="/docs/form-factory/COMPLETE-EXAMPLE.html" class="text-blue-600 hover:text-blue-800 underline">Complete Real-World Example</a> for a full application with services</li>
</ul>


                    </div>
                </div>
            </div>
        </main>
    </div>
</body>
</html>